# Assignment 5: Changes & Justifications

This document details the key changes made during the implementation of Assignment 5. This assignment represented a complete paradigm shift, migrating the entire application from a manually constructed environment of Linux primitives to a fully containerized architecture orchestrated by Docker Compose.

### Summary of Key Changes

| Feature                 | Original Plan                                                                | Actual Implementation (`assignment5.sh`)                                                                                                                                                                                            | Justification & Error Avoided                                                                                                                                                                                                                                                           |
| ----------------------- | ---------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Startup Reliability** | No strategy for handling dependency startup order.                           | **Two layers of defense against race conditions**: <br> 1. **Docker `healthcheck`**: The `docker-compose.yml` uses detailed health checks for every service (`redis-cli ping`, `pg_isready`, `curl`). <br> 2. **`depends_on` with `service_healthy`**: Containers are configured to wait for their dependencies to pass their health checks before starting. | **Error Avoided:** This is the most critical change. The manual approach and a basic Compose file would lead to services crashing if they started before their database or cache was ready. This robust dependency management guarantees a reliable startup order and a stable system. |
| **Setup & Dependencies**| Manual installation of Docker and other prerequisites.                       | **Fully automated setup**. The script attempts to automatically install Docker, Docker Compose, and `apache2-utils`. It also handles adding the user to the `docker` group and prompts for a shell restart. | **Error Avoided:** This prevents a host of common setup problems, from `docker: command not found` to permission errors when a user isn't in the `docker` group. It dramatically improves the user experience and reduces setup friction.                                              |
| **File Management**     | Manual creation of multiple `Dockerfile`s, a `docker-compose.yml`, Python source files, and a `requirements.txt`. | **All files are generated dynamically by the script**. The script creates every single required file on the fly before running Docker Compose.                                                              | **Justification:** This makes the entire migration process self-contained, portable, and perfectly reproducible. There are no external file dependencies, which eliminates a major source of potential errors and ensures consistency.                                                         |
| **Application Code**    | Assumed code from previous assignments would be used as-is.                  | **More resilient application code**. The Python services generated by the script include their own `wait_for_db()` and `wait_for_redis()` functions, providing an extra layer of robustness.        | **Justification:** This "belt-and-suspenders" approach (application-level waits + orchestrator-level healthchecks) makes the system exceptionally stable. Even if Docker's health check mechanism were to fail, the application would still wait for its dependencies, preventing crashes. |
| **Orchestration**       | A basic `docker-compose.yml` was proposed.                                     | A production-ready `docker-compose.yml` that declaratively defines the entire stack: networks, volumes for data persistence, environment variables, health checks, and service dependencies.                                     | **Justification:** This leverages the full power of Docker Compose to create a well-structured, maintainable, and observable application stack. It fully embraces the "infrastructure as code" paradigm for the application layer.                                                           |
